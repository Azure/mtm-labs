@model LandingPage.ViewModels.Home.DetailsViewModel;
@{
    ViewData["Title"] = "Publisher Details";
}

@if (ViewBag.Message != null)
{

    <h2>@ViewBag.Message</h2>
}
else
{
    <div class="main-content">

        <h2 class="text-info">Landing Page Accessible Data</h2>

        <p>
            The following data comprises a large list of values you may access when building your landing page. Although you won't need them all you have access to this data should you care to use it.
        </p>
        <p>
            @Html.ActionLink("Go back", "Index", new { token = Model.PurchaseIdToken }) to the
            standard landing page.
        </p>

        <hr/>


        <h3>User Claims Values</h3>
        <table class="main-table">
            <thead><tr><th>Item</th><th>Value</th></tr></thead>
            <tbody>
                @foreach (var claim in Model.UserClaims)
                {
                    <tr><td class="main-td">@claim.Type</td><td>@claim.Value</td></tr>
                }
            </tbody>
        </table>

        <h3>Microsoft Graph Values</h3>

        <table class="main-table">
            <thead><tr><th>Item</th><th>Value</th></tr></thead>
            <tbody>
                <tr><td class="main-td">DisplayName</td><td>@Model.GraphUser.DisplayName</td></tr>
                <tr><td class="main-td">GivenName</td><td>@Model.GraphUser.GivenName</td></tr>
                <tr><td class="main-td">SurName</td><td>@Model.GraphUser.Surname</td></tr>
                <tr><td class="main-td">Mail</td><td>@Model.GraphUser.Mail</td></tr>
                <tr><td class="main-td" colspan="2">Many More Values Available</td></tr>
            </tbody>
        </table>


        <h3>Subscription Values</h3>
        <table class="main-table">
            <thead><tr><th>Item</th><th>Value</th></tr></thead>
            <tbody>
                <tr><td class="main-td">AutoRenew</td><td>@Model.Subscription.AutoRenew</td></tr>
                <tr><td class="main-td">Beneficiary.EmailId</td><td>@Model.Subscription.Beneficiary.EmailId</td></tr>
                <tr><td class="main-td">Beneficiary.Puid</td><td>@Model.Subscription.Beneficiary.Puid</td></tr>
                <tr><td class="main-td">Beneficiary.TenantId</td><td>@Model.Subscription.Beneficiary.TenantId</td></tr>
                <tr><td class="main-td">Created</td><td>@Model.Subscription.Created</td></tr>
                <tr><td class="main-td">FulfillmentId</td><td>@Model.Subscription.FulfillmentId</td></tr>
                <tr><td class="main-td">Id</td><td>@Model.Subscription.Id</td></tr>
                <tr><td class="main-td">IsFreeTrial</td><td>@Model.Subscription.IsFreeTrial</td></tr>
                <tr><td class="main-td">IsTest</td><td>@Model.Subscription.IsTest</td></tr>
                <tr><td class="main-td">Name</td><td>@Model.Subscription.Name</td></tr>
                <tr><td class="main-td">OfferId</td><td>@Model.Subscription.OfferId</td></tr>
                <tr><td class="main-td">PlanId</td><td>@Model.Subscription.PlanId</td></tr>
                <tr><td class="main-td">PublisherId</td><td>@Model.Subscription.PublisherId</td></tr>
                <tr><td class="main-td">Purchaser.EmailId</td><td>@Model.Subscription.Purchaser.EmailId</td></tr>
                <tr><td class="main-td">Purchaser.Puid</td><td>@Model.Subscription.Purchaser.Puid</td></tr>
                <tr><td class="main-td">Purchaser.TenantId</td><td>@Model.Subscription.Purchaser.TenantId</td></tr>
                <tr><td class="main-td">SaasSubscriptionStatus</td><td>@Model.Subscription.SaasSubscriptionStatus.Value</td></tr>
                <tr><td class="main-td">SandboxType</td><td>@Model.Subscription.SandboxType.Value</td></tr>
                <tr><td class="main-td">SessionId</td><td>@Model.Subscription.SessionId</td></tr>
                <tr><td class="main-td">SessionMode</td><td>@Model.Subscription.SessionMode.Value</td></tr>
                <tr><td class="main-td">StoreFront</td><td>@Model.Subscription.StoreFront</td></tr>
                <tr><td class="main-td">Term End Date</td><td>@Model.Subscription.Term.EndDate</td></tr>
                <tr><td class="main-td">Term Start Date</td><td>@Model.Subscription.Term.StartDate</td></tr>
            </tbody>
        </table>

        <h3>Subscription Plans</h3>
        <table class="main-table">
            <tbody>
                @foreach (var plan in Model.SubscriptionPlans.Plans)
                {
                    if ((bool)!plan.IsStopSell)
                    {
                        <tr>
                            <td colspan="2">
                                <b>@plan.DisplayName</b>

                                @if (@plan.PlanId == Model.Subscription.PlanId)
                                {
                                    <span>- Current plan</span>
                                }
                            </td>
                        </tr>
                        <tr><td class="main-td">DisplayName</td><td>@Html.Raw(plan.DisplayName)</td></tr>
                        <tr><td class="main-td">Description</td><td>@Html.Raw(plan.Description)</td></tr>
                        <tr><td class="main-td">PlanId</td><td>@plan.PlanId</td></tr>
                    }
                }
            </tbody>
        </table>

        <h3>Marketplace Purchase Id Token</h3>

        <div style="text-align: left">
            @Model.PurchaseIdToken
        </div>
    </div>
}